// –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
// –ü—Ä–æ–≤–µ—Ä—è–µ–º: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–∞ 50, –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö

const fs = require('fs');

console.log('üß™ –¢–ï–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ö–ê–†–¢–û–ß–ö–ò –ö–õ–ò–ï–ù–¢–ê');
console.log('=====================================\n');

// –ß–∏—Ç–∞–µ–º –∫–æ–¥ –±–æ—Ç–∞
const botCode = fs.readFileSync('./bot.js', 'utf8');

// 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ clients
console.log('1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤:');
const clientArrayFilter = botCode.includes('} else if (c && c.name && !c.isDeleted) {');
console.log(`   ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –º–∞—Å—Å–∏–≤–µ clients: ${clientArrayFilter ? '–ù–ê–ô–î–ï–ù–ê' : '–ù–ï –ù–ê–ô–î–ï–ù–ê'}`);

const clientObjectFilter = botCode.includes('} else if (c && c.name && !c.isDeleted) {');
console.log(`   ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –æ–±—ä–µ–∫—Ç–µ clients: ${clientObjectFilter ? '–ù–ê–ô–î–ï–ù–ê' : '–ù–ï –ù–ê–ô–î–ï–ù–ê'}`);

// 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–¥–∞–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ 50 –∫–ª–∏–µ–Ω—Ç–æ–≤
console.log('\n2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤:');
const hasLimit50 = botCode.includes('.slice(0, 50)');
console.log(`   ‚úÖ –õ–∏–º–∏—Ç 50 –∫–ª–∏–µ–Ω—Ç–æ–≤ —É–¥–∞–ª–µ–Ω: ${!hasLimit50 ? '–î–ê' : '–ù–ï–¢ (–µ—â–µ –µ—Å—Ç—å .slice(0, 50))'}`);

// 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤ calculateClientCard
console.log('\n3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ calculateClientCard:');
const expenseFilter = botCode.includes('(yearData.expense || []).filter(e => !e.isDeleted).forEach(e => {');
console.log(`   ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤: ${expenseFilter ? '–ù–ê–ô–î–ï–ù–ê' : '–ù–ï –ù–ê–ô–î–ï–ù–ê'}`);

const paymentsFilter = botCode.includes('(yearData.payments || []).filter(p => !p.isDeleted).forEach(p => {');
console.log(`   ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π: ${paymentsFilter ? '–ù–ê–ô–î–ï–ù–ê' : '–ù–ï –ù–ê–ô–î–ï–ù–ê'}`);

// 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
console.log('\n4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤:');
const expenseComment = botCode.includes('// –°–æ–±–∏—Ä–∞–µ–º –ø–æ–∫—É–ø–∫–∏ (—Ç–æ–ª—å–∫–æ –Ω–µ—É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏)');
console.log(`   ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –ø–æ–∫—É–ø–æ–∫: ${expenseComment ? '–ù–ê–ô–î–ï–ù' : '–ù–ï –ù–ê–ô–î–ï–ù'}`);

const paymentsComment = botCode.includes('// –°–æ–±–∏—Ä–∞–µ–º –ø–ª–∞—Ç–µ–∂–∏ (—Ç–æ–ª—å–∫–æ –Ω–µ—É–¥–∞–ª–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏)');
console.log(`   ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π: ${paymentsComment ? '–ù–ê–ô–î–ï–ù' : '–ù–ï –ù–ê–ô–î–ï–ù'}`);

const clientsComment = botCode.includes('// –§–∏–ª—å—Ç—Ä—É–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤');
console.log(`   ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤: ${clientsComment ? '–ù–ê–ô–î–ï–ù' : '–ù–ï –ù–ê–ô–î–ï–ù'}`);

// 5. –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
console.log('\nüìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê:');
const allChecks = [
    clientArrayFilter,
    clientObjectFilter,
    !hasLimit50,
    expenseFilter,
    paymentsFilter,
    expenseComment,
    paymentsComment,
    clientsComment
];

const passedChecks = allChecks.filter(check => check).length;
const totalChecks = allChecks.length;

console.log(`‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: ${passedChecks}/${totalChecks}`);

if (passedChecks === totalChecks) {
    console.log('üéâ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!');
    console.log('\nüìã –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:');
    console.log('   ‚Ä¢ –£–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Ç–µ–ø–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞');
    console.log('   ‚Ä¢ –£–±—Ä–∞–Ω –ª–∏–º–∏—Ç 50 –∫–ª–∏–µ–Ω—Ç–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ');
    console.log('   ‚Ä¢ –í –∫–∞—Ä—Ç–æ—á–∫–µ –∫–ª–∏–µ–Ω—Ç–∞ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è —É–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏');
    console.log('   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—è—Å–Ω—è—é—â–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏');
} else {
    console.log('‚ùå –ù–ï–ö–û–¢–û–†–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ù–ï –ü–†–ò–ú–ï–ù–ï–ù–´');
    console.log('\nüîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å:');
    if (!clientArrayFilter || !clientObjectFilter) {
        console.log('   ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤');
    }
    if (hasLimit50) {
        console.log('   ‚Ä¢ –£–±—Ä–∞—Ç—å –ª–∏–º–∏—Ç 50 –∫–ª–∏–µ–Ω—Ç–æ–≤');
    }
    if (!expenseFilter) {
        console.log('   ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ calculateClientCard');
    }
    if (!paymentsFilter) {
        console.log('   ‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –≤ calculateClientCard');
    }
}

console.log('\nüöÄ –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:');
console.log('   1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: node bot.js');
console.log('   2. –í—ã–±–µ—Ä–∏—Ç–µ "üë§ –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞"');
console.log('   3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è');
console.log('   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã');
@echo off
echo ========================================
echo ü§ñ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è Telegram Bot
echo ========================================
echo.

echo üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤...

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ñ–∞–π–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if not exist "fix-telegram-bot-all.js" (
    echo ‚ùå –§–∞–π–ª fix-telegram-bot-all.js –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo    –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø–∞–ø–∫–µ telegram-bot
    pause
    exit /b 1
)

echo ‚úÖ –§–∞–π–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω

echo.
echo üìù –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ bot.js...
if not exist "bot.js.backup" (
    copy "bot.js" "bot.js.backup" >nul 2>&1
    echo ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞
) else (
    echo ‚ÑπÔ∏è –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
)

echo.
echo üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π...

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ bot.js
findstr /C:"fix-telegram-bot-all" bot.js >nul 2>&1
if %errorlevel% equ 0 (
    echo ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ bot.js
) else (
    echo ‚ö†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ bot.js
    echo    –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤—Ä—É—á–Ω—É—é
)

echo.
echo üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π...
node test-fixes.js

if %errorlevel% neq 0 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–æ–¥—É–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
    pause
    exit /b 1
)

echo.
echo üîß –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
echo.
echo üìã –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
echo   ‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –º—è–≥–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
echo   ‚Ä¢ –§—É–Ω–∫—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã)
echo   ‚Ä¢ –°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
echo   ‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
echo   ‚Ä¢ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±–æ—Ç–∞
echo   ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
echo   ‚Ä¢ –§—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
echo.
echo üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
echo   npm start
echo   –∏–ª–∏
echo   node bot.js
echo.
echo üß™ –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
echo   –í –∫–æ–¥–µ –±–æ—Ç–∞ –≤—ã–∑–æ–≤–∏—Ç–µ: global.checkFixesStatus()
echo.
echo ‚ö†Ô∏è  –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã:
echo   copy bot.js.backup bot.js
echo.
pause